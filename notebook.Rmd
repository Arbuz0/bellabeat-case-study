---
title: 'R Notebook'
author: '≈Åukasz Janiak'
output: html_document
date: '2022-04-02'
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Business Task

Questions for analysis:

* What are some trends in smart device usage?
* How could these trends apply to Bellabeat customers?
* How could these trends help influence Bellabeat marketing strategy?

## Data source

Data was downloaded from [Fitbit Fitness Tracker Data](https://www.kaggle.com/datasets/arashnic/fitbit) 
from the Kaggle web repository.  
License: CC0: Public Domain  

This dataset generated by respondents to a distributed survey via Amazon Mechanical Turk between 03.12.2016-05.12.2016. 
Thirty eligible Fitbit users consented to the submission of personal tracker data, 
including minute-level output for physical activity, heart rate, and sleep monitoring. 
Variation between output represents use of different types of Fitbit trackers and individual tracking behaviors / preferences.


## Loading packages

```{r packages}
library("readr")
library("ggplot2")
library("dplyr")
library("lubridate")
library("tidyr")
library("janitor")
```

## Importing datasets

```{r datasets, message=FALSE}
daily_activity <- read_csv("Fitabase_Data_4.12.16-5.12.16/dailyActivity_merged.csv")
hourly_calories <- read_csv("Fitabase_Data_4.12.16-5.12.16/hourlyCalories_merged.csv")
hourly_intensities <- read_csv("Fitabase_Data_4.12.16-5.12.16/hourlyIntensities_merged.csv")
hourly_steps <- read_csv("Fitabase_Data_4.12.16-5.12.16/hourlySteps_merged.csv")
sleep_day <- read_csv("Fitabase_Data_4.12.16-5.12.16/sleepDay_merged.csv")
heart_rate <- read_csv("Fitabase_Data_4.12.16-5.12.16/heartrate_seconds_merged.csv")
weight_log <- read_csv("Fitabase_Data_4.12.16-5.12.16/weightLogInfo_merged.csv")
```

## Preview

```{r}
head(daily_activity)
head(hourly_calories)
head(hourly_intensities)
head(hourly_steps)
head(sleep_day)
head(heart_rate)
head(weight_log)
```

```{r}
str(daily_activity)
str(hourly_calories)
str(hourly_intensities)
str(hourly_steps)
str(sleep_day)
str(heart_rate)
str(weight_log)
```

## Data cleaning

First, let's get rid of the duplicates.
```{r}
daily_activity <- distinct(daily_activity)
hourly_calories <- distinct(hourly_calories)
hourly_intensities <- distinct(hourly_intensities)
hourly_steps <- distinct(hourly_steps)
sleep_day <- distinct(sleep_day)
heart_rate <- distinct(heart_rate)
weight_log <- distinct(weight_log)
```


```{r}
sum(duplicated(daily_activity))
sum(duplicated(hourly_calories))
sum(duplicated(hourly_intensities))
sum(duplicated(hourly_steps))
sum(duplicated(sleep_day))
sum(duplicated(heart_rate))
sum(duplicated(weight_log))
```

Now let's standardize the date format and make new column with day of the week.

```{r}
daily_activity <- daily_activity %>%
  clean_names() %>%
  mutate(activity_date = mdy(activity_date), day_of_week = weekdays(activity_date)) %>%
  rename("date" = activity_date)


hourly_calories <- hourly_calories %>%
  clean_names() %>%
  separate(col = activity_hour, into = c("date", "time"), sep = " ") %>%
  mutate(date = mdy(date), day_of_week = weekdays(date))


hourly_intensities <- hourly_intensities %>%
  clean_names() %>%
  separate(col = activity_hour, into = c("date", "time"), sep = " ") %>%
  mutate(date = mdy(date), day_of_week = weekdays(date))


hourly_steps <- hourly_steps %>%
  clean_names() %>%
  separate(col = activity_hour, into = c("date", "time"), sep = " ") %>%
  mutate(date = mdy(date), day_of_week = weekdays(date))


sleep_day <- sleep_day %>%
  clean_names() %>%
  separate(col = sleep_day, into = c("date", "time"), sep = " ") %>%
  mutate(date = mdy(date), day_of_week = weekdays(date))


heart_rate <- heart_rate %>%
  clean_names() %>%
  mutate(time = mdy_hms(time), day_of_week = weekdays(time)) %>%
  rename("date" = time)


weight_log <- weight_log %>%
  clean_names() %>%
  mutate(date = date(mdy_hms(date)), day_of_week = weekdays(date)) %>%
  rename("date" = date)
```

```{r, echo = FALSE}
str(daily_activity)
str(hourly_calories)
str(hourly_intensities)
str(hourly_steps)
str(sleep_day)
str(heart_rate)
str(weight_log)
```
